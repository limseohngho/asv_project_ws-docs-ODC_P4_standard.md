#!/bin/bash
# ODC-P4 ê°œë°œ í‘œì¤€ ì¤€ìˆ˜ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸

# 1. ë¡œê·¸ ë””ë ‰í† ë¦¬ ìƒì„± (ì—†ì„ ê²½ìš°)
mkdir -p logs

# 2. íŒŒì¼ëª…ìš© íƒ€ìž„ìŠ¤íƒ¬í”„ ìƒì„±
TIMESTAMP=$(date +%Y%m%d_%H%M%S)
LOG_FILE="logs/build_${TIMESTAMP}.log"

echo "ðŸš€ ë¹Œë“œë¥¼ ì‹œìž‘í•©ë‹ˆë‹¤. ë¡œê·¸ íŒŒì¼: ${LOG_FILE}"

# 3. colcon ë¹Œë“œ ìˆ˜í–‰ ë° ë¡œê·¸ ê¸°ë¡
# ROS í™˜ê²½ ì„¤ì •ì„ ìŠ¤í¬ë¦½íŠ¸ ë‚´ë¶€ì—ì„œ ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì„ í¬í•¨í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
colcon build --symlink-install 2>&1 | tee ${LOG_FILE}

echo "âœ… ë¹Œë“œ ì™„ë£Œ!"
